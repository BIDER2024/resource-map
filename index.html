function ResourceMap({ onCompletePlan }) {
   const [situation, setSituation] = React.useState('');
   const [activeResource, setActiveResource] = React.useState(null);
   const [ratings, setRatings] = React.useState({});
   const [notes, setNotes] = React.useState({});
   const [isComplete, setIsComplete] = React.useState(false);

   const resources = {
       'כישורים אישיים': [
           'חוסן נפשי', 'ביטחון עצמי', 'גמישות מחשבתית', 
           'יצירתיות', 'מודעות עצמית', 'יכולת למידה'
       ],
       'כישורים חברתיים': [
           'תקשורת בינאישית', 'אמפתיה', 'עבודת צוות', 
           'מנהיגות', 'יכולת השפעה', 'יצירת קשרים'
       ],
       'כישורים מקצועיים': [
           'מומחיות תחומית', 'ניהול זמן', 'פתרון בעיות', 
           'חשיבה אנליטית', 'יזמות', 'קבלת החלטות'
       ],
       'משאבים רגשיים': [
           'ויסות רגשי', 'אופטימיות', 'הנעה עצמית', 
           'התמודדות עם לחץ', 'חוסן רגשי', 'מוטיבציה'
       ]
   };

   const categories = Object.keys(resources);

   React.useEffect(() => {
       const allResources = Object.values(resources).flat();
       const allRated = allResources.every(resource => ratings[resource] !== undefined);
       
       if (allRated && situation.trim() !== '') {
           setIsComplete(true);
       } else {
           setIsComplete(false);
       }
   }, [ratings, situation]);

   const getCirclePosition = (index, total, radius, centerX, centerY) => {
       const angle = (index * 2 * Math.PI) / total;
       return {
           x: centerX + radius * Math.cos(angle - Math.PI / 2),
           y: centerY + radius * Math.sin(angle - Math.PI / 2)
       };
   };

   const getRatingColor = (rating) => {
       switch(rating) {
           case 1: return '#FF9999';
           case 2: return '#FFD699';
           case 3: return '#99FF99';
           case 4: return '#9999FF';
           default: return '#CCCCCC';
       }
   };

   const handleRatingChange = (resource, rating) => {
       setRatings(prev => ({
           ...prev,
           [resource]: rating
       }));
   };

   const handleNoteChange = (resource, note) => {
       setNotes(prev => ({
           ...prev,
           [resource]: note
       }));
   };

   const handleCompletePlan = () => {
       onCompletePlan(situation, ratings, notes);
   };

   return (
       <div className="p-4 max-w-6xl mx-auto">
           <div className="mb-8">
               <div className="mb-6">
                   <label className="block text-xl text-gray-700 mb-2">
                       הסיטואציה שברצוני לבחון:
                   </label>
                   <input
                       type="text"
                       value={situation}
                       onChange={(e) => setSituation(e.target.value)}
                       className="w-full p-3 border rounded-lg text-lg"
                       placeholder="תאר/י את הסיטואציה..."
                   />
               </div>
           </div>

           <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
               <div className="lg:col-span-9 bg-white p-4 rounded-lg shadow-lg relative">
                   <div className="absolute left-4 top-4 bg-white p-4 rounded-lg shadow-md z-10">
                       <h3 className="text-lg font-bold mb-2">עוצמת משאב:</h3>
                       {[
                           { level: 1, color: '#FF9999', text: 'חלש' },
                           { level: 2, color: '#FFD699', text: 'בינוני' },
                           { level: 3, color: '#99FF99', text: 'חזק' },
                           { level: 4, color: '#9999FF', text: 'חזק מאוד' }
                       ].map((item) => (
                           <div key={item.level} className="flex items-center mb-1">
                               <div 
                                   className="w-4 h-4 ml-2"
                                   style={{ backgroundColor: item.color }}
                               />
                               <span className="text-sm">
                                   {`${item.text} (${item.level})`}
                               </span>
                           </div>
                       ))}
                   </div>

                   <svg viewBox="0 0 600 600" className="w-full h-full">
                       {[4, 3, 2, 1].map((level) => (
                           <g key={level}>
                               <circle
                                   cx="300"
                                   cy="300"
                                   r={level * 60}
                                   fill="none"
                                   stroke="#ddd"
                                   strokeWidth="1"
                               />
                               <text
                                   x="300"
                                   y={300 - (level * 60) + 20}
                                   textAnchor="middle"
                                   fill="#666"
                                   fontSize="16"
                                   fontWeight="bold"
                               >
                                   {level}
                               </text>
                           </g>
                       ))}

                       {categories.map((category, categoryIndex) => (
                           resources[category].map((resource, resourceIndex) => {
                               const totalResources = Object.values(resources).flat().length;
                               const index = categoryIndex * resources[category].length + resourceIndex;
                               const pos = getCirclePosition(index, totalResources, 240, 300, 300);
                               const rating = ratings[resource] || 0;
                               const ratingPos = getCirclePosition(
                                   index,
                                   totalResources,
                                   rating * 60,
                                   300,
                                   300
                               );

                               return (
                                   <g key={resource}>
                                       <line
                                           x1="300"
                                           y1="300"
                                           x2={pos.x}
                                           y2={pos.y}
                                           stroke="#eee"
                                           strokeWidth="1"
                                       />
                                       
                                       {rating > 0 && (
                                           <g>
                                               <circle
                                                   cx={ratingPos.x}
                                                   cy={ratingPos.y}
                                                   r="15"
                                                   fill={getRatingColor(rating)}
                                                   opacity="0.8"
                                               />
                                               <text
                                                   x={ratingPos.x}
                                                   y={ratingPos.y + 5}
                                                   textAnchor="middle"
                                                   fill="white"
                                                   fontSize="12"
                                                   fontWeight="bold"
                                               >
                                                   {rating}
                                               </text>
                                           </g>
                                       )}

                                       <g
                                           transform={`translate(${pos.x}, ${pos.y})`}
                                           onClick={() => setActiveResource(resource)}
                                           style={{ cursor: 'pointer' }}
                                       >
                                           <circle
                                               r="6"
                                               fill={activeResource === resource ? "#3B82F6" : "#93C5FD"}
                                           />
                                           <text
                                               x={pos.x > 300 ? 10 : -10}
                                               y="5"
                                               textAnchor={pos.x > 300 ? "start" : "end"}
                                               fontSize="14"
                                               fill="#4B5563"
                                               className="font-medium"
                                           >
                                               {resource}
                                           </text>
                                       </g>
                                   </g>
                               );
                           })
                       ))}
                   </svg>
               </div>

               <div className="lg:col-span-3">
                   {activeResource ? (
                       <div className="bg-white p-4 rounded-lg shadow-lg">
                           <h3 className="text-xl font-bold mb-4">{activeResource}</h3>
                           <div className="mb-6">
                               <label className="block text-gray-700 mb-2">
                                   דירוג (1-4):
                               </label>
                               <input
                                   type="range"
                                   min="0"
                                   max="4"
                                   step="1"
                                   value={ratings[activeResource] || 0}
                                   onChange={(e) => handleRatingChange(activeResource, Number(e.target.value))}
                                   className="w-full"
                               />
                               <div className="flex justify-between text-sm text-gray-600">
                                   <span>חלש</span>
                                   <span>חזק מאוד</span>
                               </div>
                           </div>
                           <div>
                               <label className="block text-gray-700 mb-2">
                                   הערות:
                               </label>
                               <textarea
                                   value={notes[activeResource] || ''}
                                   onChange={(e) => handleNoteChange(activeResource, e.target.value)}
                                   className="w-full p-2 border rounded-lg"
                                   rows="4"
                                   placeholder="הוסף/י הערות..."
                               />
                           </div>
                       </div>
                   ) : (
                       <div className="bg-blue-50 p-4 rounded-lg">
                           <p className="text-lg text-blue-800 text-center">
                               בחר/י משאב במפה כדי לדרג ולהוסיף הערות
                           </p>
                       </div>
                   )}
               </div>
           </div>

           <div className="mt-6 text-center">
               <button
                   onClick={handleCompletePlan}
                   disabled={!isComplete}
                   className={`px-8 py-3 rounded-lg text-white text-lg font-semibold ${
                       isComplete 
                           ? 'bg-blue-600 hover:bg-blue-700' 
                           : 'bg-gray-400 cursor-not-allowed'
                   }`}
               >
                   סיום וקבלת תוכנית פיתוח
               </button>
           </div>
       </div>
   );
}function App() {
   const [showDevelopmentPlan, setShowDevelopmentPlan] = React.useState(false);
   const [planData, setPlanData] = React.useState(null);

   const handleCompletePlan = (situation, ratings, notes) => {
       setPlanData({ situation, ratings, notes });
       setShowDevelopmentPlan(true);
   };

   const handleResetPlan = () => {
       setShowDevelopmentPlan(false);
       setPlanData(null);
   };

   return (
       <div className="min-h-screen bg-gradient-to-b from-blue-50 to-white">
           {!showDevelopmentPlan ? (
               <>
                   <div className="pt-12 pb-6 text-center">
                       <h1 className="text-5xl font-bold text-blue-800 mb-4">
                           עכשיו גלה את משאביך
                       </h1>
                       <h2 className="text-2xl text-gray-600">
                           מאת רות בידרמן
                       </h2>
                   </div>

                   <div className="max-w-6xl mx-auto px-4 py-8">
                       <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                           <div className="intro-card p-8">
                               <h3 className="text-2xl font-bold text-blue-700 mb-4">
                                   מהי מפת המשאבים?
                               </h3>
                               <p className="text-lg text-gray-700">
                                   מפת המשאבים האישית היא כלי ייחודי המאפשר לך לזהות ולמפות את החוזקות, 
                                   הכישורים והיכולות העומדים לרשותך. באמצעות המפה תוכל/י לקבל תמונה מקיפה 
                                   של המשאבים שלך בארבעה תחומים מרכזיים: אישי, מקצועי, חברתי ורגשי.
                               </p>
                           </div>

                           <div className="intro-card p-8">
                               <h3 className="text-2xl font-bold text-blue-700 mb-4">
                                   למה זה חשוב?
                               </h3>
                               <p className="text-lg text-gray-700">
                                   מחקרים מראים שזיהוי וטיפוח משאבים אישיים מגביר חוסן נפשי, משפר ביצועים 
                                   ומעצים את תחושת המסוגלות. הבנת המשאבים העומדים לרשותנו מאפשרת לנו 
                                   להתמודד טוב יותר עם אתגרים ולממש את הפוטנציאל שלנו.
                               </p>
                           </div>
                       </div>

                       <ResourceMap onCompletePlan={handleCompletePlan} />
                   </div>
               </>
           ) : (
               <DevelopmentPlan 
                   situation={planData.situation} 
                   ratings={planData.ratings}
                   notes={planData.notes}
                   onReset={handleResetPlan}
               />
           )}
       </div>
   );
}

ReactDOM.render(
   <App />,
   document.getElementById('root')
);
